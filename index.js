var HID = require('node-hid');

// parseInt("ff", 17) --> give me int of this hex number
// >>2 -- bit shift by 2

var red     = [ 0, parseInt("ff", 16)>>2, 0x00, 0x00, 0x00, 0x00, 0x00, 0x25, 0x05 ];
var green   = [ 0, 0x00, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x25, 0x05 ];
var yellow  = [ 0, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x25, 0x05 ];
var blue    = [ 0, 0x00, 0x00, 0xFF, 0x00, 0x00, 0x00, 0x25, 0x05 ];
var magenta = [ 0, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0x25, 0x05 ];
var cyan    = [ 0, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x25, 0x05 ];
var white   = [ 0, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x25, 0x05 ];
var off     = [ 0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x25, 0x05 ];
 
var light;

HID.devices().forEach( function(device) {
  if ( device.product.match(/Dream Cheeky/) ) {
    light = new HID.HID(device.path);

    var data1 = [ 0, 0x1F, 0x02, 0x00, 0x5F, 0x00, 0x00, 0x1F, 0x03 ];
    light.write(data1);

    var data2 = [ 0, 0x00, 0x02, 0x00, 0x5F, 0x00, 0x00, 0x1F, 0x04 ];
    light.write(data2);

    var data3 = [ 0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0x05 ];
    light.write(data3);

    var data4 = [ 0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01 ];
    light.write(data4);

  }     
});

function sendColor(color) {
  light.write(red);
  light.close()
}              

sendColor();
